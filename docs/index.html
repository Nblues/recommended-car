<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <title>รถเข้าใหม่ รถมือสองเชียงใหม่ อัปเดตล่าสุด | ครูหนึ่งรถสวย</title>
  <meta name="description" content="รวมรถเข้าใหม่ รถมือสองเชียงใหม่ อัปเดตรถล่าสุด รถบ้านเกรดเอ ฟรีดาวน์ สภาพดี ราคาถูก ผ่อนสบาย ผ่านไฟแนนซ์ง่าย">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="canonical" href="https://chiangraiusedcar.com/" />
  <meta property="og:title" content="รถเข้าใหม่ รถมือสองเชียงใหม่ อัปเดตล่าสุด | ครูหนึ่งรถสวย">
  <meta property="og:description" content="รถเข้าใหม่ รถบ้านเชียงใหม่ ฟรีดาวน์ อัปเดตรถล่าสุดทุกวัน เชื่อถือได้ ครูหนึ่งรถสวย">
  <meta property="og:url" content="https://chiangraiusedcar.com/">
  <meta property="og:type" content="website">
  <meta property="og:image" content="https://chiangraiusedcar.com/cover.jpg">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="รถเข้าใหม่ รถมือสองเชียงใหม่ อัปเดตล่าสุด | ครูหนึ่งรถสวย">
  <meta name="twitter:description" content="รถบ้านคุณภาพดี รถมือสองเชียงใหม่ ผ่อนถูก ฟรีดาวน์ อัปเดตรถใหม่ทุกวัน">
  <meta name="twitter:image" content="https://chiangraiusedcar.com/cover.jpg">
  <style>
    body { font-family: 'Prompt', sans-serif; margin:0; background:#f5f5f5; }
    .container { max-width:1200px; margin:0 auto; padding:24px; }
    h1 { font-size:2rem; margin-bottom:20px; color:#1a237e; }
    #latest-cars { display:grid; grid-template-columns:repeat(1,1fr); gap:18px;}
    @media(min-width:600px){#latest-cars{grid-template-columns:repeat(2,1fr);}}
    @media(min-width:992px){#latest-cars{grid-template-columns:repeat(3,1fr);}}
    .car-card { background:#fff; border-radius:10px; box-shadow:0 1px 8px #0002; overflow:hidden; display:flex; flex-direction:column; }
    .car-card img { width:100%; height:180px; object-fit:cover; }
    .car-body { padding:18px; flex:1; display:flex; flex-direction:column; }
    .car-title { font-size:1.1rem; font-weight:600; margin-bottom:6px; color:#d35400;}
    .car-desc { font-size:1rem; color:#444; margin-bottom:12px;}
    .car-price { font-size:1.2rem; color:#c62828; font-weight:700; margin-bottom:8px;}
    .car-meta { font-size:0.95rem; color:#555; margin-bottom:10px;}
    .btn-more { margin-top:auto;}
    .btn-more a { display:inline-block; background:#039be5; color:#fff; border-radius:4px; padding:10px 22px; text-decoration:none; font-weight:500; }
    .btn-more a:hover { background:#1a237e; }
    .view-all-cars { margin:28px 0 0 0; text-align:center;}
    .view-all-cars a { background:#43a047; color:#fff; border-radius:5px; padding:14px 34px; font-weight:600; text-decoration:none; font-size:1.1rem; }
    .view-all-cars a:hover { background:#237a31;}
  </style>
</head>
<body>
  <div class="container">
    <h1>รถเข้าใหม่ 6 คันล่าสุด</h1>
    <section id="latest-cars">กำลังโหลดรถ...</section>
    <div class="view-all-cars">
      <a href="https://chiangraiusedcar.com/all-cars-1" target="_blank">ดูรถทั้งหมด</a>
    </div>
  </div>
  <script>
    // ถ้ามี feed.xml ให้ดึงจาก feed (ปรับ url ตามจริง)
    fetch("https://nblues.github.io/recommended-car/feed.xml")
      .then(r=>r.ok?r.text():Promise.reject("fail"))
      .then(str=>(new window.DOMParser()).parseFromString(str,"text/xml"))
      .then(data=>{
        const items = Array.from(data.querySelectorAll("item")).slice(0,6);
        const cars = items.map(item=>{
          const title = item.querySelector("title")?.textContent||"";
          const desc = item.querySelector("description")?.textContent||"";
          const link = item.querySelector("link")?.textContent||"#";
          const imgMatch = desc.match(/<img[^>]+src="([^"]+)"/);
          const img = imgMatch ? imgMatch[1] : "https://via.placeholder.com/600x400?text=No+Image";
          const priceMatch = desc.match(/([\d,]+)\s*บาท|฿([\d,]+)/i);
          const price = priceMatch ? (priceMatch[1]||priceMatch[2]) : "-";
          return {title,desc:desc.replace(/<[^>]+>/g,"").slice(0,68)+"...",link,img,price};
        });
        renderCars(cars);
      })
      .catch(e=>{
        document.getElementById('latest-cars').innerHTML = "<p>ไม่พบข้อมูลรถ กรุณาตรวจสอบไฟล์ feed.xml</p>";
      });

    function renderCars(cars){
      document.getElementById('latest-cars').innerHTML =
        cars.map(car=>`
          <div class="car-card" itemscope itemtype="https://schema.org/Product">
            <img src="${car.img}" alt="${car.title}" itemprop="image" loading="lazy">
            <div class="car-body">
              <div class="car-title" itemprop="name">${car.title}</div>
              <div class="car-desc" itemprop="description">${car.desc}</div>
              <div class="car-price" itemprop="offers" itemscope itemtype="https://schema.org/Offer">
                ฿<span itemprop="price">${car.price}</span>
              </div>
              <div class="btn-more">
                <a href="${car.link}" target="_blank" itemprop="url">ดูรายละเอียด</a>
              </div>
            </div>
          </div>
        `).join('');
    }
  </script>
</body>
</html>