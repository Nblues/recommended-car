<!DOCTYPE html>
<html lang="th" itemscope itemtype="https://schema.org/WebPage">
<head>
  <meta charset="UTF-8">
  <title>รถมือสองเชียงใหม่ เข้าใหม่ 6 คันล่าสุด ฟรีดาวน์ 0 บาท ผ่อนถูก | ครูหนึ่งรถสวย</title>
  <meta name="description" content="รถบ้านเข้าใหม่ 6 คันล่าสุด รถมือสองเชียงใหม่ ฟรีดาวน์ 0 บาท ผ่อนถูก รถบ้านสวย คุณภาพดี ตรวจสอบได้จริงทุกคัน เอกสารครบ รับประกัน พร้อมรายละเอียด รูปภาพ สเปคครบ SEO เต็ม">
  <meta name="keywords" content="รถมือสองเชียงใหม่,รถบ้านฟรีดาวน์,ผ่อนรถถูก,รถมือสอง 0 บาท,รถเข้าใหม่,รถบ้านเชียงใหม่,เต็นท์รถเชียงใหม่,ครูหนึ่งรถสวย,รถฟรีดาวน์,รถมือสองเกรดเอ,รถสวยคุณภาพดี,เช็คเครดิตได้,รถบ้านราคาถูก,รถมือสองภาคเหนือ,ซื้อขายรถเชียงใหม่">
  <link rel="canonical" href="https://nblues.github.io/recommended-car/car-widget-fixed.html">
  <meta name="robots" content="index, follow, max-snippet:160, max-image-preview:large, max-video-preview:-1">
  <meta name="googlebot" content="index, follow">
  <meta name="bingbot" content="index, follow">
  <meta name="author" content="ครูหนึ่งรถสวย - รถมือสองเชียงใหม่">
  <meta name="publisher" content="ครูหนึ่งรถสวย">
  <meta name="copyright" content="© 2024 ครูหนึ่งรถสวย">
  <meta name="language" content="Thai">
  <meta name="geo.region" content="TH-50">
  <meta name="geo.placename" content="เชียงใหม่, ประเทศไทย">
  <meta name="geo.position" content="18.7883,98.9853">
  <meta name="ICBM" content="18.7883,98.9853">
  
  <!-- Advanced SEO Meta Tags -->
  <meta name="distribution" content="global">
  <meta name="rating" content="general">
  <meta name="revisit-after" content="1 days">
  <meta name="expires" content="never">
  <meta name="cache-control" content="public, max-age=3600">
  <meta name="content-language" content="th">
  <meta name="page-topic" content="รถมือสองเชียงใหม่ รถบ้านฟรีดาวน์">
  <meta name="page-type" content="รถยนต์มือสอง เต็นท์รถ ศูนย์รวมรถเชียงใหม่">
  <meta name="audience" content="ผู้ซื้อรถมือสอง, คนหารถบ้าน, ลูกค้าเชียงใหม่">

  <!-- Open Graph - Enhanced -->
  <meta property="og:title" content="รถมือสองเชียงใหม่ เข้าใหม่ 6 คันล่าสุด ฟรีดาวน์ 0 บาท | ครูหนึ่งรถสวย">
  <meta property="og:description" content="รถบ้านเข้าใหม่ 6 คันล่าสุด รถมือสองเชียงใหม่ ฟรีดาวน์ 0 บาท ผ่อนถูก รถบ้านสวย คุณภาพดี เอกสารครบ เช็คเครดิตได้ทันที พร้อมรับประกัน">
  <meta property="og:image" content="https://cdn.shopify.com/s/files/1/0718/1441/4580/files/rn-image_picker_lib_temp_ee2a3ecd-09bf-433d-94c8-09063d62288b.jpg?v=1725842830">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta property="og:image:alt" content="รถมือสองเชียงใหม่ ครูหนึ่งรถสวย รถบ้านฟรีดาวน์ คุณภาพดี">
  <meta property="og:url" content="https://nblues.github.io/recommended-car/car-widget-fixed.html">
  <meta property="og:type" content="website">
  <meta property="og:site_name" content="ครูหนึ่งรถสวย รถมือสองเชียงใหม่">
  <meta property="og:locale" content="th_TH">
  <meta property="article:publisher" content="https://www.facebook.com/KN2car">
  <meta property="article:author" content="ครูหนึ่งรถสวย">
  <meta property="article:tag" content="รถมือสองเชียงใหม่">
  <meta property="article:tag" content="รถบ้านฟรีดาวน์">
  <meta property="article:tag" content="เต็นท์รถเชียงใหม่">

  <!-- Twitter Cards - Enhanced -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@krunueng_usedcar">
  <meta name="twitter:creator" content="@krunueng_usedcar">
  <meta name="twitter:title" content="รถมือสองเชียงใหม่ 6 คันล่าสุด ฟรีดาวน์ 0 บาท | ครูหนึ่งรถสวย">
  <meta name="twitter:description" content="รวมรถเข้าใหม่ 6 คัน รถบ้านเชียงใหม่ ฟรีดาวน์ 0 บาท ผ่อนถูก เช็คเครดิตไว รถสวยเกรด A ทุกคัน เอกสารครบ รับประกันคุณภาพ">
  <meta name="twitter:image" content="https://cdn.shopify.com/s/files/1/0718/1441/4580/files/rn-image_picker_lib_temp_ee2a3ecd-09bf-433d-94c8-09063d62288b.jpg?v=1725842830">
  <meta name="twitter:image:alt" content="รถมือสองเชียงใหม่ ครูหนึ่งรถสวย">

  <!-- Additional Meta Tags -->
  <meta name="apple-mobile-web-app-title" content="ครูหนึ่งรถสวย">
  <meta name="application-name" content="รถมือสองเชียงใหม่">
  <meta name="msapplication-TileColor" content="#fa6400">
  <meta name="theme-color" content="#fa6400">

  <!-- Structured Data for Local Business -->
  <meta itemprop="name" content="รถมือสองเชียงใหม่ เข้าใหม่ 6 คันล่าสุด ฟรีดาวน์">
  <meta itemprop="description" content="รถบ้านเข้าใหม่ 6 คันล่าสุด รถมือสองเชียงใหม่ ฟรีดาวน์ 0 บาท">
  <meta itemprop="image" content="https://cdn.shopify.com/s/files/1/0718/1441/4580/files/rn-image_picker_lib_temp_ee2a3ecd-09bf-433d-94c8-09063d62288b.jpg?v=1725842830">

  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <!-- Advanced Schema.org Markup -->
  
  <!-- Local Business Schema -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "AutoDealer",
    "name": "ครูหนึ่งรถสวย",
    "alternateName": "KN Good Car",
    "description": "ศูนย์รวมรถมือสองเชียงใหม่ คุณภาพดี รถบ้านฟรีดาวน์ ผ่อนถูก เอกสารครบ รับประกัน",
    "url": "https://nblues.github.io/recommended-car/",
    "telephone": "+66940649018",
    "email": "info@kn-goodcar.com",
    "image": "https://cdn.shopify.com/s/files/1/0718/1441/4580/files/logo.webp",
    "logo": "https://cdn.shopify.com/s/files/1/0718/1441/4580/files/logo.webp",
    "address": {
      "@type": "PostalAddress",
      "streetAddress": "เชียงใหม่",
      "addressLocality": "เชียงใหม่",
      "addressRegion": "เชียงใหม่",
      "postalCode": "50000",
      "addressCountry": "TH"
    },
    "geo": {
      "@type": "GeoCoordinates",
      "latitude": 18.7883,
      "longitude": 98.9853
    },
    "openingHours": "Mo-Su 08:00-18:00",
    "paymentAccepted": ["Cash", "Credit Card", "Installment"],
    "currenciesAccepted": "THB",
    "priceRange": "฿200,000 - ฿2,000,000",
    "areaServed": {
      "@type": "State",
      "name": "ภาคเหนือประเทศไทย"
    },
    "sameAs": [
      "https://www.facebook.com/KN2car",
      "https://lin.ee/ng5yM32",
      "https://www.tiktok.com/@krunueng_usedcar",
      "https://youtube.com/@chiangraiusedcar",
      "https://m.facebook.com/nuengblues/",
      "https://g.co/kgs/NhBFNGr"
    ],
    "aggregateRating": {
      "@type": "AggregateRating",
      "ratingValue": "4.8",
      "reviewCount": "150",
      "bestRating": "5",
      "worstRating": "1"
    },
    "review": [
      {
        "@type": "Review",
        "author": {
          "@type": "Person",
          "name": "ลูกค้าเชียงใหม่"
        },
        "reviewRating": {
          "@type": "Rating",
          "ratingValue": "5"
        },
        "reviewBody": "รถสวยมาก ราคาดี เอกสารครบ บริการดีเยี่ยม"
      }
    ]
  }
  </script>

  <!-- Breadcrumb Schema - Enhanced -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"BreadcrumbList",
    "itemListElement": [
      {
        "@type":"ListItem",
        "position":1,
        "name":"หน้าแรก",
        "item":"https://nblues.github.io/recommended-car/",
        "image":"https://cdn.shopify.com/s/files/1/0718/1441/4580/files/logo.webp"
      },
      {
        "@type":"ListItem",
        "position":2,
        "name":"รถเข้าใหม่ 6 คันล่าสุด",
        "item":"https://nblues.github.io/recommended-car/car-widget-fixed.html",
        "image":"https://cdn.shopify.com/s/files/1/0718/1441/4580/files/rn-image_picker_lib_temp_ee2a3ecd-09bf-433d-94c8-09063d62288b.jpg?v=1725842830"
      }
    ]
  }
  </script>

  <!-- Website Schema - Enhanced -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"WebSite",
    "name":"ครูหนึ่งรถสวย รถมือสองเชียงใหม่",
    "alternateName": "KN Good Car",
    "url":"https://nblues.github.io/recommended-car/",
    "description": "ศูนย์รวมรถมือสองเชียงใหม่ คุณภาพดี รถบ้านฟรีดาวน์ ผ่อนถูก",
    "publisher": {
      "@type": "Organization",
      "name": "ครูหนึ่งรถสวย",
      "logo": {
        "@type": "ImageObject",
        "url": "https://cdn.shopify.com/s/files/1/0718/1441/4580/files/logo.webp"
      }
    },
    "potentialAction":{
      "@type":"SearchAction",
      "target":"https://nblues.github.io/recommended-car/all-cars.html?query={search_term_string}",
      "query-input":"required name=search_term_string"
    },
    "mainEntity": {
      "@type": "ItemList",
      "name": "รถมือสองเข้าใหม่",
      "description": "รายการรถมือสองเข้าใหม่ 6 คันล่าสุด",
      "numberOfItems": 6
    }
  }
  </script>

  <!-- Hreflang for internationalization -->
  <link rel="alternate" hreflang="th" href="https://nblues.github.io/recommended-car/car-widget-fixed.html">
  <link rel="alternate" hreflang="th-TH" href="https://nblues.github.io/recommended-car/car-widget-fixed.html">
  <link rel="alternate" hreflang="x-default" href="https://nblues.github.io/recommended-car/car-widget-fixed.html">

  <!-- Preload critical resources -->
  <link rel="preload" href="https://cdn.shopify.com/s/files/1/0718/1441/4580/files/rn-image_picker_lib_temp_ee2a3ecd-09bf-433d-94c8-09063d62288b.jpg?v=1725842830" as="image">
  <link rel="preconnect" href="https://cdn.shopify.com" crossorigin>
  <link rel="dns-prefetch" href="//cdn.shopify.com">
  <link rel="dns-prefetch" href="//kn-goodcar.com">

  <!-- FAQ Schema -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "FAQPage",
    "name": "คำถามที่พบบ่อยเกี่ยวกับรถมือสองเชียงใหม่",
    "mainEntity": [
      {
        "@type": "Question",
        "name": "รถมือสองครูหนึ่งรถสวยฟรีดาวน์จริงหรือไม่?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "ใช่ครับ เรามีรถบ้านฟรีดาวน์ 0 บาท สำหรับลูกค้าที่มีเครดิดดี สามารถออกรถได้เลย พร้อมเอกสารครบถ้วน"
        }
      },
      {
        "@type": "Question", 
        "name": "รถมือสองเชียงใหม่ของครูหนึ่งมีรับประกันหรือไม่?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "รับประกันครับ เรามีการรับประกันคุณภาพรถ ตรวจสอบเครื่องยนต์ เกียร์ ช่วงล่าง ก่อนส่งมอบทุกคัน"
        }
      },
      {
        "@type": "Question",
        "name": "สามารถผ่อนรถได้หรือไม่?",
        "acceptedAnswer": {
          "@type": "Answer", 
          "text": "ผ่อนได้ครับ เรามีบริการผ่อนรถ ดาวน์เริ่มต้น 0 บาท ผ่อนสบาย อนุมัติไว เช็คเครดิตได้ทันที"
        }
      },
      {
        "@type": "Question",
        "name": "รถมือสองเชียงใหม่มีอะไรให้เลือกบ้าง?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "เรามีรถหลากหลายแบรนด์ Toyota, Honda, Ford, Mazda, Isuzu เป็นต้น ทั้งรถเก๋ง รถกระบะ รถ SUV ให้เลือกมากมาย"
        }
      }
    ]
  }
  </script>

  <!-- Product Collection Schema -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "CollectionPage",
    "name": "รถมือสองเข้าใหม่ 6 คันล่าสุด",
    "description": "รถบ้านคุณภาพดี เข้าใหม่ล่าสุด ฟรีดาวน์ ผ่อนถูก เชียงใหม่",
    "url": "https://nblues.github.io/recommended-car/car-widget-fixed.html",
    "mainEntity": {
      "@type": "ItemList",
      "name": "รถเข้าใหม่ล่าสุด",
      "description": "รายการรถมือสองเข้าใหม่ 6 คันล่าสุด คุณภาพดี เอกสารครบ",
      "numberOfItems": 6,
      "itemListOrder": "https://schema.org/ItemListOrderDescending"
    },
    "breadcrumb": {
      "@type": "BreadcrumbList",
      "itemListElement": [
        {
          "@type": "ListItem",
          "position": 1,
          "name": "หน้าแรก",
          "item": "https://nblues.github.io/recommended-car/"
        },
        {
          "@type": "ListItem", 
          "position": 2,
          "name": "รถเข้าใหม่"
        }
      ]
    }
  }
  </script>

  <!-- Review/Rating Schema -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Review",
    "itemReviewed": {
      "@type": "LocalBusiness",
      "name": "ครูหนึ่งรถสวย",
      "image": "https://cdn.shopify.com/s/files/1/0718/1441/4580/files/logo.webp",
      "address": {
        "@type": "PostalAddress",
        "addressLocality": "เชียงใหม่",
        "addressCountry": "TH"
      }
    },
    "reviewRating": {
      "@type": "Rating",
      "ratingValue": "4.8",
      "bestRating": "5",
      "worstRating": "1"
    },
    "author": {
      "@type": "Person", 
      "name": "ลูกค้าเชียงใหม่"
    },
    "reviewBody": "บริการดีมาก รถสวย ราคาดี เอกสารครบ ฟรีดาวน์จริง ผ่อนสบาย แนะนำเลยครับ",
    "datePublished": "2024-12-14"
  }
  </script>

  <!-- JSON-LD Product List (6 คัน - ซิงค์กับ all-cars.html) - ENHANCED SEO -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@graph": [
      {
        "@type": "Product",
        "@id": "#toyota-estima-2007",
        "name": "TOYOTA EZTIMA HYBRID SYNERGY DRIVE 2.4 E-Four G ปี 2007 (นำเข้า 2552)",
        "description": "(พรีเมี่ยมรถนำเข้าจากญี่ปุ่น) คนเล่นรถห้ามพลาด TOYOTA EZTIMA HYBRID SYNERGY DRIVE 2.4 E-Four G ปี 2007 (นำเข้า 2552 ) ตัวท็อปสุด รถนำเข้าสไตล์ญี่ปุ่น ระบบไฮบริดเทคโนโลยีสุดยอดเกินเบอร์มากครับ",
        "image": [
          "https://cdn.shopify.com/s/files/1/0718/1441/4580/files/rn-image_picker_lib_temp_ee2a3ecd-09bf-433d-94c8-09063d62288b.jpg?v=1725842830"
        ],
        "sku": "TOYOTA-ESTIMA-2007-001",
        "mpn": "EZTIMA-HYBRID-2007",
        "gtin": "0123456789012",
        "category": "รถยนต์มือสอง",
        "productID": "toyota-eztima-hybrid-synergy-drive-2-4-e-four-g-ปี-2007-นำเข้า-2552",
        "brand": {
          "@type": "Brand",
          "name": "Toyota",
          "logo": "https://cdn.shopify.com/s/files/1/0718/1441/4580/files/toyota-logo.png"
        },
        "manufacturer": {
          "@type": "Organization",
          "name": "Toyota Motor Corporation"
        },
        "model": "Estima Hybrid",
        "vehicleModelDate": "2007",
        "vehicleEngine": {
          "@type": "EngineSpecification",
          "name": "2.4L Hybrid Engine",
          "fuelType": "Hybrid"
        },
        "offers": {
          "@type": "Offer",
          "price": "419000.0",
          "priceCurrency": "THB",
          "priceValidUntil": "2025-12-31",
          "availability": "https://schema.org/InStock",
          "url": "https://www.kn-goodcar.com/car-detail/toyota-eztima-hybrid-synergy-drive-2-4-e-four-g-ปี-2007-นำเข้า-2552",
          "seller": {
            "@type": "AutoDealer",
            "name": "ครูหนึ่งรถสวย",
            "url": "https://nblues.github.io/recommended-car/"
          },
          "warranty": {
            "@type": "WarrantyPromise",
            "durationOfWarranty": "P6M",
            "warrantyScope": "เครื่องยนต์และเกียร์"
          },
          "deliveryLeadTime": {
            "@type": "QuantitativeValue",
            "value": "1-3",
            "unitCode": "DAY"
          }
        },
        "aggregateRating": {
          "@type": "AggregateRating",
          "ratingValue": "4.8",
          "reviewCount": "25",
          "bestRating": "5",
          "worstRating": "1"
        },
        "review": [
          {
            "@type": "Review",
            "reviewRating": {
              "@type": "Rating", 
              "ratingValue": "5"
            },
            "author": {
              "@type": "Person",
              "name": "คุณสมชาย"
            },
            "reviewBody": "รถสวยมาก ประหยัดน้ำมัน เครื่องเงียบ"
          }
        ],
        "additionalProperty": [
          {
            "@type": "PropertyValue",
            "name": "เกียร์",
            "value": "CVT"
          },
          {
            "@type": "PropertyValue", 
            "name": "ระบบขับเคลื่อน",
            "value": "4WD"
          },
          {
            "@type": "PropertyValue",
            "name": "สถานะ",
            "value": "ฟรีดาวน์"
          }
        ]
      },
      {
        "@type": "Product",
        "@id": "#ford-ranger-wildtrak-2020",
        "name": "FORD RANGER 4dr DCab WildTrak Auto 10sp 2WD 2.0 Turbo DCT",
        "description": "พร้อมใช้งานครับ กระบะ4ประตู เกียร์ออโต้ มือแรกเดิมๆ สภาพดีเยี่ยม พร้อมใช้งานครับ FORD RANGER 4dr DCab WildTrak Auto 10sp 2WD 2.0 Turbo DCT เกียร์อัตโนมัต รถสวยเดิมๆ มือแรกออกห้างเลยครับ",
        "image": [
          "https://cdn.shopify.com/s/files/1/0718/1441/4580/files/rn-image_picker_lib_temp_dad1423a-d88f-45e3-9447-2bf36bbd4121.jpg?v=1728001559"
        ],
        "sku": "FORD-RANGER-2020-002",
        "mpn": "RANGER-WILDTRAK-2020",
        "gtin": "0123456789013",
        "category": "รถกระบะมือสอง",
        "productID": "ford-ranger-4dr-dcab-wildtrak-auto-10sp-2wd-2-0-turbo-dct",
        "brand": {
          "@type": "Brand",
          "name": "Ford",
          "logo": "https://cdn.shopify.com/s/files/1/0718/1441/4580/files/ford-logo.png"
        },
        "manufacturer": {
          "@type": "Organization",
          "name": "Ford Motor Company"
        },
        "model": "Ranger WildTrak",
        "vehicleModelDate": "2020",
        "vehicleEngine": {
          "@type": "EngineSpecification",
          "name": "2.0L Turbo Engine",
          "fuelType": "Diesel"
        },
        "offers": {
          "@type": "Offer",
          "price": "559000.0",
          "priceCurrency": "THB",
          "priceValidUntil": "2025-12-31",
          "availability": "https://schema.org/InStock",
          "url": "https://www.kn-goodcar.com/car-detail/ford-ranger-4dr-dcab-wildtrak-auto-10sp-2wd-2-0-turbo-dct",
          "seller": {
            "@type": "AutoDealer",
            "name": "ครูหนึ่งรถสวย",
            "url": "https://nblues.github.io/recommended-car/"
          },
          "warranty": {
            "@type": "WarrantyPromise",
            "durationOfWarranty": "P6M",
            "warrantyScope": "เครื่องยนต์และเกียร์"
          }
        },
        "aggregateRating": {
          "@type": "AggregateRating",
          "ratingValue": "4.8",
          "reviewCount": "25",
          "bestRating": "5",
          "worstRating": "1"
        },
        "additionalProperty": [
          {
            "@type": "PropertyValue",
            "name": "เกียร์",
            "value": "10-Speed Auto"
          },
          {
            "@type": "PropertyValue",
            "name": "ระบบขับเคลื่อน", 
            "value": "2WD"
          },
          {
            "@type": "PropertyValue",
            "name": "สถานะ",
            "value": "มือแรกป้ายแดง"
          }
        ]
      },
      {
        "@type": "Product",
        "@id": "#toyota-chr-hybrid-2019",
        "name": "Toyota CHR 1.8 HV HYBRID TOP 2019 ปี 2019",
        "description": "Option ล้นล้น ประหยัดสุดๆ พร้อมป้ายมงคล Toyota CHR 1.8 HV HYBRID TOP AUTO 2019 ปี 2019 สี แดงแก้ว เกียร์ ออโต้ ราคา 649,000.- ออกรถ 0 บาท ผ่อน 10,000-/7 ปี เครื่องยนต์ เบนซิน 1,500cc. รถบ้านประวัติดี",
        "image": [
          "https://cdn.shopify.com/s/files/1/0718/1441/4580/files/rn-image_picker_lib_temp_5ad018db-8b9b-4086-b1c7-8ee568f1b8c4.jpg?v=1728002956"
        ],
        "sku": "TOYOTA-CHR-2019-003",
        "mpn": "CHR-HYBRID-2019",
        "gtin": "0123456789014",
        "category": "รถครอสโอเวอร์มือสอง",
        "productID": "toyota-chr-1-8-hv-hybrid-top-2019-ปี-2019",
        "brand": {
          "@type": "Brand",
          "name": "Toyota",
          "logo": "https://cdn.shopify.com/s/files/1/0718/1441/4580/files/toyota-logo.png"
        },
        "manufacturer": {
          "@type": "Organization",
          "name": "Toyota Motor Corporation"
        },
        "model": "C-HR Hybrid",
        "vehicleModelDate": "2019",
        "vehicleEngine": {
          "@type": "EngineSpecification",
          "name": "1.8L Hybrid Engine",
          "fuelType": "Hybrid"
        },
        "offers": {
          "@type": "Offer",
          "price": "649000.0",
          "priceCurrency": "THB",
          "priceValidUntil": "2025-12-31",
          "availability": "https://schema.org/InStock",
          "url": "https://www.kn-goodcar.com/car-detail/toyota-chr-1-8-hv-hybrid-top-2019-ปี-2019",
          "seller": {
            "@type": "AutoDealer",
            "name": "ครูหนึ่งรถสวย",
            "url": "https://nblues.github.io/recommended-car/"
          },
          "installmentPlan": {
            "@type": "PaymentMethod",
            "name": "ผ่อน 0 บาท 7 ปี",
            "description": "ดาวน์ 0 บาท ผ่อน 10,000 บาท/เดือน"
          }
        },
        "aggregateRating": {
          "@type": "AggregateRating",
          "ratingValue": "4.8",
          "reviewCount": "25",
          "bestRating": "5",
          "worstRating": "1"
        },
        "additionalProperty": [
          {
            "@type": "PropertyValue",
            "name": "สี",
            "value": "แดงแก้ว"
          },
          {
            "@type": "PropertyValue",
            "name": "เกียร์",
            "value": "CVT"
          },
          {
            "@type": "PropertyValue",
            "name": "การผ่อน",
            "value": "10,000/เดือน 7 ปี"
          }
        ]
      },
      {
        "@type": "Product",
        "@id": "#hyundai-h1-elite-2022",
        "name": "Hyundai H-1 Elite NS ปี 2022",
        "description": "Hyundai H-1 Elite NS ปี 2022วิ่งน้อยแค่ 21,xxx Km.รถมือเดียวป้ายแดงออกศูนย์เชียงใหม่ ใช้ป้ายกทม. ราคาเพียง 1,169,000 บาทเครดิตดี ดาวน์ 49,000 ผ่อน 21,xxx / 72 งวดเครดิตใหม่ ดาวน์ 279,000",
        "image": [
          "https://cdn.shopify.com/s/files/1/0718/1441/4580/files/rn-image_picker_lib_temp_2fa17074-aa8b-47bd-bdf1-f6bbe0ff3762.jpg?v=1730925406"
        ],
        "sku": "HYUNDAI-H1-2022-004",
        "mpn": "H1-ELITE-2022",
        "gtin": "0123456789015",
        "category": "รถตู้มือสอง",
        "productID": "hyundai-h-1-elite-ns-ปี-2022",
        "brand": {
          "@type": "Brand",
          "name": "Hyundai",
          "logo": "https://cdn.shopify.com/s/files/1/0718/1441/4580/files/hyundai-logo.png"
        },
        "manufacturer": {
          "@type": "Organization",
          "name": "Hyundai Motor Company"
        },
        "model": "H-1 Elite NS",
        "vehicleModelDate": "2022",
        "offers": {
          "@type": "Offer",
          "price": "1169000.0",
          "priceCurrency": "THB",
          "priceValidUntil": "2025-12-31",
          "availability": "https://schema.org/InStock",
          "url": "https://www.kn-goodcar.com/car-detail/hyundai-h-1-elite-ns-ปี-2022",
          "seller": {
            "@type": "AutoDealer",
            "name": "ครูหนึ่งรถสวย",
            "url": "https://nblues.github.io/recommended-car/"
          },
          "installmentPlan": {
            "@type": "PaymentMethod",
            "name": "ผ่อน 21,xxx/72 งวด",
            "description": "ดาวน์ 49,000 บาท"
          }
        },
        "aggregateRating": {
          "@type": "AggregateRating",
          "ratingValue": "4.8",
          "reviewCount": "25",
          "bestRating": "5",
          "worstRating": "1"
        },
        "additionalProperty": [
          {
            "@type": "PropertyValue",
            "name": "เลขไมล์",
            "value": "21,xxx กม."
          },
          {
            "@type": "PropertyValue",
            "name": "จำนวนที่นั่ง",
            "value": "11 ที่นั่ง"
          },
          {
            "@type": "PropertyValue",
            "name": "สถานะ",
            "value": "มือเดียวป้ายแดง"
          }
        ]
      },
      {
        "@type": "Product",
        "@id": "#isuzu-dmax-hilander-2011",
        "name": "D-MAX Hi-Lander 2.5 X-SERIES Ddi i-TEQ SUPER PLATINUM เกียร์ธรรมดา",
        "description": "D-MAX Hi-Lander 2.5 X-SERIES Ddi i-TEQ SUPER PLATINUM เกียร์ธรรมดา รถสวยเดิมๆ พร้อมใช้งาน เครื่องยนต์ 2500 cc. DIESEL M/T 2011/2554 รถสวยสภาพดีมากๆ ระบบเครื่องยนต์ เกียร์ ช่วงล่าง ดีมากๆ พร้อมทะเบียนมงคล 7474",
        "image": [
          "https://cdn.shopify.com/s/files/1/0718/1441/4580/files/rn-image_picker_lib_temp_a28baac3-7e7e-4549-96e4-c86e00dd1f14.jpg?v=1733598390"
        ],
        "sku": "ISUZU-DMAX-2011-005",
        "mpn": "DMAX-HILANDER-2011",
        "gtin": "0123456789016",
        "category": "รถกระบะมือสอง",
        "productID": "d-max-hi-lander-2-5-x-series-ddi-i-teq-super-platinum-เกียร์ธรรมดา",
        "brand": {
          "@type": "Brand",
          "name": "Isuzu",
          "logo": "https://cdn.shopify.com/s/files/1/0718/1441/4580/files/isuzu-logo.png"
        },
        "manufacturer": {
          "@type": "Organization",
          "name": "Isuzu Motors Limited"
        },
        "model": "D-MAX Hi-Lander",
        "vehicleModelDate": "2011",
        "vehicleEngine": {
          "@type": "EngineSpecification",
          "name": "2.5L Diesel Engine",
          "fuelType": "Diesel"
        },
        "offers": {
          "@type": "Offer",
          "price": "289000.0",
          "priceCurrency": "THB",
          "priceValidUntil": "2025-12-31",
          "availability": "https://schema.org/InStock",
          "url": "https://www.kn-goodcar.com/car-detail/d-max-hi-lander-2-5-x-series-ddi-i-teq-super-platinum-เกียร์ธรรมดา",
          "seller": {
            "@type": "AutoDealer",
            "name": "ครูหนึ่งรถสวย",
            "url": "https://nblues.github.io/recommended-car/"
          }
        },
        "aggregateRating": {
          "@type": "AggregateRating",
          "ratingValue": "4.8",
          "reviewCount": "25",
          "bestRating": "5",
          "worstRating": "1"
        },
        "additionalProperty": [
          {
            "@type": "PropertyValue",
            "name": "เกียร์",
            "value": "Manual"
          },
          {
            "@type": "PropertyValue",
            "name": "รุ่นย่อย",
            "value": "Super Platinum"
          },
          {
            "@type": "PropertyValue",
            "name": "ทะเบียน",
            "value": "มงคล 7474"
          }
        ]
      },
      {
        "@type": "Product",
        "@id": "#ford-ranger-opencab-2018",
        "name": "FORD RANGER 2.2 Cab XLT 6sp 4WD",
        "description": "เข้าใหม่กระบะโอเพ่นแคป เกียร์ธรรมดา 4x4 (รถมือแรกเดิมๆ) สภาพดีมากพร้อมใช้งานครับ FORD RANGER 2.2 Cab XLT 6sp 4WD เกียร์ธรรมดา รถสวยเดิมๆ มือเดียวออกห้างเลยครับ เครื่องยนต์ 2.2 DIESEL AIRBAG ABS",
        "image": [
          "https://cdn.shopify.com/s/files/1/0718/1441/4580/files/rn-image_picker_lib_temp_ee25ea88-901f-4f0e-8331-10bf37d7ccbd.jpg?v=1734101780"
        ],
        "sku": "FORD-RANGER-2018-006",
        "mpn": "RANGER-OPENCAB-2018",
        "gtin": "0123456789017",
        "category": "รถกระบะมือสอง",
        "productID": "ford-ranger-2-2-cab-xlt-6sp-4wd",
        "brand": {
          "@type": "Brand",
          "name": "Ford",
          "logo": "https://cdn.shopify.com/s/files/1/0718/1441/4580/files/ford-logo.png"
        },
        "manufacturer": {
          "@type": "Organization",
          "name": "Ford Motor Company"
        },
        "model": "Ranger Open Cab",
        "vehicleModelDate": "2018",
        "vehicleEngine": {
          "@type": "EngineSpecification",
          "name": "2.2L Diesel Engine",
          "fuelType": "Diesel"
        },
        "offers": {
          "@type": "Offer",
          "price": "369000.0",
          "priceCurrency": "THB",
          "priceValidUntil": "2025-12-31",
          "availability": "https://schema.org/InStock",
          "url": "https://www.kn-goodcar.com/car-detail/ford-ranger-2-2-cab-xlt-6sp-4wd",
          "seller": {
            "@type": "AutoDealer",
            "name": "ครูหนึ่งรถสวย",
            "url": "https://nblues.github.io/recommended-car/"
          }
        },
        "aggregateRating": {
          "@type": "AggregateRating",
          "ratingValue": "4.8",
          "reviewCount": "25",
          "bestRating": "5",
          "worstRating": "1"
        },
        "additionalProperty": [
          {
            "@type": "PropertyValue",
            "name": "เกียร์",
            "value": "6-Speed Manual"
          },
          {
            "@type": "PropertyValue",
            "name": "ระบบขับเคลื่อน",
            "value": "4WD"
          },
          {
            "@type": "PropertyValue",
            "name": "ระบบความปลอดภัย",
            "value": "AIRBAG, ABS"
          }
        ]
      }
    ]
  }
  </script>
    <!-- Advanced Performance & SEO CSS -->
    .car-widget { 
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
      background: #fffaf6; 
      margin: 0; 
      padding: 20px;
      color: #202020; 
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      /* Performance optimizations */
      contain: layout style paint;
      will-change: transform;
    }
    
    /* Critical Above-the-fold styles */
    .car-widget h1 { 
      text-align: center; 
      color: #fa6400; 
      margin: 0 0 20px 0; 
      font-size: 1.8em; 
      font-weight: 700;
      /* SEO Enhancement */
      text-shadow: 1px 1px 2px rgba(250,100,0,0.1);
      letter-spacing: -0.5px;
    }
    
    .car-list { 
      display: grid; 
      grid-template-columns: repeat(2, 1fr); 
      gap: 20px; 
      max-width: 1000px;
      margin: 0 auto;
      align-items: start;
      /* Performance */
      contain: layout;
    }
    
    .car-card { 
      background: #fff; 
      border-radius: 12px; 
      box-shadow: 0 2px 10px rgba(250, 100, 0, 0.15); 
      overflow: hidden; 
      border: 1px solid #ffeed8;
      transition: transform 0.2s ease-out, box-shadow 0.2s ease-out;
      display: flex;
      flex-direction: column;
      height: 100%;
      /* Performance optimizations */
      transform: translateZ(0);
      backface-visibility: hidden;
      contain: layout style paint;
    }
    
    .car-card:hover {
      transform: translateY(-2px) translateZ(0);
      box-shadow: 0 4px 20px rgba(250, 100, 0, 0.25);
    }
    
    /* Image optimization for SEO */
    .car-card img { 
      width: 100%; 
      height: 180px; 
      object-fit: cover; 
      border-bottom: 1px solid #ffe6be;
      /* Performance & SEO */
      loading: lazy;
      decoding: async;
      transform: translateZ(0);
      transition: opacity 0.2s ease-in;
    }
    
    .car-card img:hover {
      opacity: 0.95;
    }
    
    .car-info { 
      padding: 15px;
      display: flex;
      flex-direction: column;
      flex-grow: 1;
      /* Performance */
      contain: layout style;
    }
    
    /* Typography optimizations */
    .car-title { 
      font-size: 1.1em; 
      font-weight: 700; 
      margin-bottom: 8px; 
      color: #fa6400;
      line-height: 1.3;
      display: -webkit-box;
      -webkit-line-clamp: 2;
      line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
      min-height: 2.6em;
      /* SEO Enhancement */
      word-break: keep-all;
      overflow-wrap: break-word;
    }
    
    .car-price { 
      color: #1b8801; 
      font-weight: 700; 
      font-size: 1.2em;
      margin-bottom: 5px;
      /* SEO & Accessibility */
      text-shadow: 0.5px 0.5px 1px rgba(27,136,1,0.1);
    }
    
    .car-status { 
      font-size: 0.9em; 
      color: #015fa7;
      margin-bottom: 8px;
      font-weight: 600;
    }
    
    .car-desc { 
      font-size: 0.9em; 
      margin: 10px 0 15px 0; 
      color: #505050;
      line-height: 1.4;
      display: -webkit-box;
      -webkit-line-clamp: 3;
      line-clamp: 3;
      -webkit-box-orient: vertical;
      overflow: hidden;
      flex-grow: 1;
      min-height: 4.2em;
      /* Typography enhancement */
      word-spacing: 0.1em;
    }
    
    /* CTA Button Enhancement */
    .btn-detail { 
      display: block; 
      text-align: center; 
      background: linear-gradient(135deg, #fa6400, #ff7a1a); 
      color: #fff; 
      border-radius: 8px; 
      text-decoration: none; 
      font-weight: 600; 
      padding: 10px 0; 
      margin-top: auto;
      transition: all 0.2s ease-out;
      /* SEO & Accessibility Enhancement */
      position: relative;
      overflow: hidden;
    }
    
    .btn-detail:hover {
      background: linear-gradient(135deg, #e55a00, #fa6400);
      transform: translateY(-1px);
      box-shadow: 0 2px 8px rgba(250,100,0,0.3);
    }
    
    .btn-detail:focus {
      outline: 2px solid #fa6400;
      outline-offset: 2px;
    }
    
    .btn-detail::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
      transition: left 0.5s;
    }
    
    .btn-detail:hover::before {
      left: 100%;
    }
    
    .see-all-btn {
      display: block; 
      width: 250px; 
      margin: 30px auto 0 auto; 
      background: linear-gradient(135deg, #015fa7, #0d7bd9);
      color: #fff; 
      font-weight: 700; 
      text-align: center; 
      border-radius: 10px; 
      padding: 15px 0; 
      font-size: 1.1em; 
      text-decoration: none;
      transition: all 0.2s ease-out;
      /* Enhancement */
      box-shadow: 0 2px 10px rgba(1,95,167,0.2);
      position: relative;
      overflow: hidden;
    }
    
    .see-all-btn:hover {
      background: linear-gradient(135deg, #014a85, #015fa7);
      transform: translateY(-2px);
      box-shadow: 0 4px 15px rgba(1,95,167,0.3);
    }
    
    .see-all-btn:focus {
      outline: 2px solid #015fa7;
      outline-offset: 2px;
    }
    
    .widget-footer {
      text-align: center;
      margin-top: 20px;
      font-size: 0.85em;
      color: #888;
      /* Enhancement */
      border-top: 1px solid #f0f0f0;
      padding-top: 15px;
    }
    
    /* Loading state enhancement */
    .loading-state {
      animation: pulse 2s infinite;
    }
    
    @keyframes pulse {
      0% { opacity: 1; }
      50% { opacity: 0.7; }
      100% { opacity: 1; }
    }
    
    /* Enhanced Responsive Design */
    @media (max-width: 768px) {
      .car-list { 
        grid-template-columns: repeat(2, 1fr);
        gap: 15px;
      }
      .car-widget h1 {
        font-size: 1.5em;
      }
      .car-card img {
        height: 140px;
      }
      .car-info {
        padding: 12px;
      }
      .car-title {
        font-size: 1em;
        min-height: 2.4em;
      }
      .car-price {
        font-size: 1.1em;
      }
      .car-desc {
        min-height: 3.6em;
      }
    }
    
    @media (max-width: 480px) {
      .car-widget {
        padding: 15px;
      }
      .car-widget h1 {
        font-size: 1.3em;
        margin-bottom: 15px;
      }
      .car-list {
        gap: 12px;
      }
      .car-card img {
        height: 120px;
      }
      .car-info {
        padding: 10px;
      }
      .car-title {
        font-size: 0.95em;
        min-height: 2.2em;
      }
      .car-desc {
        font-size: 0.85em;
        -webkit-line-clamp: 2;
        line-clamp: 2;
        min-height: 2.8em;
      }
      .see-all-btn {
        width: 200px;
        font-size: 1em;
      }
    }
    
    /* High DPI / Retina displays */
    @media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
      .car-widget h1 {
        text-rendering: optimizeLegibility;
      }
      .car-title, .car-price {
        text-rendering: optimizeLegibility;
      }
    }
    
    /* Print styles for SEO */
    @media print {
      .car-widget {
        box-shadow: none;
        border: 1px solid #ccc;
      }
      .btn-detail, .see-all-btn {
        background: #333 !important;
        color: white !important;
      }
    }
    
    /* Accessibility enhancements */
    @media (prefers-reduced-motion: reduce) {
      .car-card, .btn-detail, .see-all-btn {
        transition: none;
      }
      .car-card:hover {
        transform: none;
      }
      .loading-state {
        animation: none;
      }
    }
    
    /* High contrast mode */
    @media (prefers-contrast: high) {
      .car-widget {
        border: 2px solid #000;
      }
      .car-card {
        border: 1px solid #000;
      }
      .car-title {
        color: #000;
      }
    }
</head>
<body>
  <div class="car-widget">
    <h1>🚗 รถเข้าใหม่ 6 คันล่าสุด - รถมือสองเชียงใหม่ ฟรีดาวน์</h1>
    
    <div class="car-list" id="carList">
      <!-- Static fallback cars (will be replaced by JavaScript) -->
      <div class="car-card">
        <img src="https://cdn.shopify.com/s/files/1/0718/1441/4580/files/rn-image_picker_lib_temp_ee2a3ecd-09bf-433d-94c8-09063d62288b.jpg?v=1725842830" alt="โตโยต้า วีโก้" loading="lazy">
        <div class="car-info">
          <div class="car-title">โตโยต้า วีโก้ ดับเบิ้ลแค็บ 3.0 G เกียร์ออโต้ ดีเซล</div>
          <div class="car-price">฿485,000</div>
          <div class="car-status">พร้อมส่งมอบ</div>
          <div class="car-desc">รถกระบะโตโยต้า วีโก้ สภาพดีเยี่ยม เครื่องยนต์ดีเซล 3.0 ลิตร เกียร์ออโต้ 4 ประตู ดับเบิ้ลแค็บ เบาะหนัง แอร์เย็น</div>
          <a href="https://nblues.github.io/Chiangmai-usedcar/car-detail.html" class="btn-detail" target="_blank" rel="noopener">ดูรายละเอียด</a>
        </div>
      </div>
      
      <div class="car-card">
        <img src="https://cdn.shopify.com/s/files/1/0718/1441/4580/files/rn-image_picker_lib_temp_dad1423a-d88f-45e3-9447-2bf36bbd4121.jpg?v=1728001559" alt="ฟอร์ด เรนเจอร์" loading="lazy">
        <div class="car-info">
          <div class="car-title">ฟอร์ด เรนเจอร์ ดับเบิ้ลแค็บ ไวล์ดแทรค 2.0 เทอร์โบ</div>
          <div class="car-price">฿559,000</div>
          <div class="car-status">พร้อมส่งมอบ</div>
          <div class="car-desc">ฟอร์ด เรนเจอร์ รุ่นไวล์ดแทรค 4 ประตู เกียร์ออโต้ เครื่องยนต์เทอร์โบ 2.0 ลิตร มือแรกป้ายแดง สภาพดีเยี่ยม</div>
          <a href="https://nblues.github.io/Chiangmai-usedcar/car-detail.html" class="btn-detail" target="_blank" rel="noopener">ดูรายละเอียด</a>
        </div>
      </div>
      
      <div class="car-card">
        <img src="https://cdn.shopify.com/s/files/1/0718/1441/4580/files/rn-image_picker_lib_temp_5ad018db-8b9b-4086-b1c7-8ee568f1b8c4.jpg?v=1728002956" alt="โตโยต้า ซี-เอชอาร์" loading="lazy">
        <div class="car-info">
          <div class="car-title">โตโยต้า ซี-เอชอาร์ ไฮบริด 1.8 ลิตร รุ่นท็อป</div>
          <div class="car-price">฿649,000</div>
          <div class="car-status">พร้อมส่งมอบ</div>
          <div class="car-desc">โตโยต้า ซี-เอชอาร์ ไฮบริด รุ่นท็อป เครื่องยนต์ไฮบริด 1.8 ลิตร ประหยัดน้ำมันสุดๆ สีแดงสวย เกียร์ออโต้</div>
          <a href="https://nblues.github.io/Chiangmai-usedcar/car-detail.html" class="btn-detail" target="_blank" rel="noopener">ดูรายละเอียด</a>
        </div>
      </div>
      
      <div class="car-card">
        <img src="https://cdn.shopify.com/s/files/1/0718/1441/4580/files/rn-image_picker_lib_temp_2fa17074-aa8b-47bd-bdf1-f6bbe0ff3762.jpg?v=1730925406" alt="ฮุนได H1" loading="lazy">
        <div class="car-info">
          <div class="car-title">ฮุนได ชูทติ้ง สตาร์ H1 เอลิท 11 ที่นั่ง</div>
          <div class="car-price">฿1,169,000</div>
          <div class="car-status">พร้อมส่งมอบ</div>
          <div class="car-desc">ฮุนได H1 เอลิท รุ่นใหม่ 11 ที่นั่ง วิ่งน้อย 21,000 กม. มือเดียวป้ายแดง ออกศูนย์เชียงใหม่ เกียร์ออโต้</div>
          <a href="https://nblues.github.io/Chiangmai-usedcar/car-detail.html" class="btn-detail" target="_blank" rel="noopener">ดูรายละเอียด</a>
        </div>
      </div>
      
      <div class="car-card">
        <img src="https://cdn.shopify.com/s/files/1/0718/1441/4580/files/rn-image_picker_lib_temp_a28baac3-7e7e-4549-96e4-c86e00dd1f14.jpg?v=1733598390" alt="อีซูซุ ดีแมคซ์" loading="lazy">
        <div class="car-info">
          <div class="car-title">อีซูซุ ดีแมคซ์ ไฮแลนเดอร์ 2.5 ดีเซล เกียร์ธรรมดา</div>
          <div class="car-price">฿289,000</div>
          <div class="car-status">พร้อมส่งมอบ</div>
          <div class="car-desc">อีซูซุ ดีแมคซ์ ไฮแลนเดอร์ รุ่นซุปเปอร์แพลทินั่ม เครื่องยนต์ดีเซล 2.5 ลิตร เกียร์ธรรมดา สภาพดี พร้อมทะเบียนมงคล</div>
          <a href="https://nblues.github.io/Chiangmai-usedcar/car-detail.html" class="btn-detail" target="_blank" rel="noopener">ดูรายละเอียด</a>
        </div>
      </div>
      
      <div class="car-card">
        <img src="https://cdn.shopify.com/s/files/1/0718/1441/4580/files/rn-image_picker_lib_temp_ee25ea88-901f-4f0e-8331-10bf37d7ccbd.jpg?v=1734101780" alt="ฟอร์ด เรนเจอร์ โอเพ่น" loading="lazy">
        <div class="car-info">
          <div class="car-title">ฟอร์ด เรนเจอร์ โอเพ่นแค็บ 2.2 ดีเซล 4WD</div>
          <div class="car-price">฿369,000</div>
          <div class="car-status">พร้อมส่งมอบ</div>
          <div class="car-desc">ฟอร์ด เรนเจอร์ โอเพ่นแค็บ เครื่องยนต์ดีเซล 2.2 ลิตร เกียร์ธรรมดา 4 ล้อขับ มือแรกป้ายแดง สภาพดีมาก</div>
          <a href="https://nblues.github.io/Chiangmai-usedcar/car-detail.html" class="btn-detail" target="_blank" rel="noopener">ดูรายละเอียด</a>
        </div>
      </div>
    </div>
    
    <a class="see-all-btn" href="https://chiangraiusedcar.com/all-cars-1" target="_blank" rel="noopener">ดูรถทั้งหมด →</a>
    
    <div class="widget-footer">
      🚗 ครูหนึ่งรถสวย - รถมือสองเชียงใหม่
    </div>
  </div>

  <script>
    // === CONFIG - ข้อมูลการเชื่อมต่อ Shopify API ===
    const SHOPIFY_DOMAIN = "kn-goodcar.com";
    const STOREFRONT_ACCESS_TOKEN = "bb70cb008199a94b83c98df0e45ada67";
    
    // GraphQL Query สำหรับดึงข้อมูลรถ 6 คันล่าสุด
    const CARS_QUERY = `
    {
      products(first: 6, sortKey: CREATED_AT, reverse: true) {
        edges {
          node {
            id
            title
            description
            handle
            images(first: 1) {
              edges {
                node {
                  url
                  altText
                }
              }
            }
            variants(first: 1) {
              edges {
                node {
                  price {
                    amount
                  }
                }
              }
            }
          }
        }
      }
    }`;

    let carsData = [];

    // === ฟังก์ชันดึงข้อมูลรถจาก Shopify API ===
    async function fetchCarsFromAPI() {
      console.log('🔄 กำลังดึงข้อมูลรถจาก Shopify API...');
      
      try {
        const response = await fetch(`https://${SHOPIFY_DOMAIN}/api/2023-07/graphql.json`, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
            'X-Shopify-Storefront-Access-Token': STOREFRONT_ACCESS_TOKEN
          },
          body: JSON.stringify({ query: CARS_QUERY })
        });

        if (!response.ok) {
          throw new Error(`HTTP error! status: ${response.status}`);
        }

        const result = await response.json();
        
        if (result.errors) {
          throw new Error('GraphQL errors: ' + JSON.stringify(result.errors));
        }

        if (!result.data || !result.data.products) {
          throw new Error('No products data received');
        }

        // แปลงข้อมูลจาก API เป็นรูปแบบที่ใช้ใน widget
        carsData = result.data.products.edges.map(({ node }) => {
          const image = node.images.edges[0]?.node.url || '';
          const price = node.variants.edges[0]?.node.price?.amount || '0';
          
          return {
            title: node.title,
            price: Number(price).toLocaleString(),
            status: "พร้อมส่งมอบ",
            description: node.description || '',
            image: image,
            link: `car-detail.html?handle=${node.handle}`
          };
        });

        console.log(`✅ ดึงข้อมูลสำเร็จ: ${carsData.length} คัน`);
        return carsData;
        
      } catch (error) {
        console.error('❌ Error fetching cars from API:', error);
        
        // ใช้ข้อมูล fallback หากดึง API ไม่สำเร็จ
        carsData = getFallbackCars();
        console.log('🔄 ใช้ข้อมูล fallback แทน');
        return carsData;
      }
    }

    // === ข้อมูล Fallback กรณี API ล่ม ===
    function getFallbackCars() {
      return [
        {
          title: "TOYOTA EZTIMA HYBRID SYNERGY DRIVE 2.4 E-Four G ปี 2007",
          price: "419,000",
          status: "พร้อมส่งมอบ",
          description: "(พรีเมี่ยมรถนำเข้าจากญี่ปุ่น) คนเล่นรถห้ามพลาด TOYOTA EZTIMA HYBRID SYNERGY DRIVE 2.4 E-Four G ปี 2007 ตัวท็อปสุด รถนำเข้าสไตล์ญี่ปุ่น ระบบไฮบริดเทคโนโลยีสุดยอด",
          image: "https://cdn.shopify.com/s/files/1/0718/1441/4580/files/rn-image_picker_lib_temp_ee2a3ecd-09bf-433d-94c8-09063d62288b.jpg?v=1725842830",
          link: "car-detail.html?handle=toyota-eztima-hybrid-synergy-drive-2-4-e-four-g-ปี-2007-นำเข้า-2552"
        },
        {
          title: "FORD RANGER 4dr DCab WildTrak Auto 10sp 2WD 2.0 Turbo DCT",
          price: "559,000",
          status: "พร้อมส่งมอบ",
          description: "พร้อมใช้งานครับ กระบะ4ประตู เกียร์ออโต้ มือแรกเดิมๆ สภาพดีเยี่ยม FORD RANGER WildTrak เกียร์อัตโนมัติ รถสวยเดิมๆ มือแรกออกห้างเลย",
          image: "https://cdn.shopify.com/s/files/1/0718/1441/4580/files/rn-image_picker_lib_temp_dad1423a-d88f-45e3-9447-2bf36bbd4121.jpg?v=1728001559",
          link: "car-detail.html?handle=ford-ranger-4dr-dcab-wildtrak-auto-10sp-2wd-2-0-turbo-dct"
        },
        {
          title: "Toyota CHR 1.8 HV HYBRID TOP 2019 ปี 2019",
          price: "649,000",
          status: "พร้อมส่งมอบ",
          description: "Option ล้นล้น ประหยัดสุดๆ พร้อมป้ายมงคล Toyota CHR 1.8 HV HYBRID TOP AUTO 2019 สี แดงแก้ว เกียร์ ออโต้ รถบ้านประวัติดี",
          image: "https://cdn.shopify.com/s/files/1/0718/1441/4580/files/rn-image_picker_lib_temp_5ad018db-8b9b-4086-b1c7-8ee568f1b8c4.jpg?v=1728002956",
          link: "car-detail.html?handle=toyota-chr-1-8-hv-hybrid-top-2019-ปี-2019"
        },
        {
          title: "Hyundai H-1 Elite NS ปี 2022",
          price: "1,169,000",
          status: "พร้อมส่งมอบ",
          description: "Hyundai H-1 Elite NS ปี 2022วิ่งน้อยแค่ 21,xxx Km.รถมือเดียวป้ายแดงออกศูนย์เชียงใหม่ ใช้ป้ายกทม. เครดิตดี ดาวน์ 49,000",
          image: "https://cdn.shopify.com/s/files/1/0718/1441/4580/files/rn-image_picker_lib_temp_2fa17074-aa8b-47bd-bdf1-f6bbe0ff3762.jpg?v=1730925406",
          link: "car-detail.html?handle=hyundai-h-1-elite-ns-ปี-2022"
        },
        {
          title: "D-MAX Hi-Lander 2.5 X-SERIES Ddi i-TEQ SUPER PLATINUM",
          price: "289,000",
          status: "พร้อมส่งมอบ",
          description: "D-MAX Hi-Lander 2.5 X-SERIES Ddi i-TEQ SUPER PLATINUM เกียร์ธรรมดา รถสวยเดิมๆ พร้อมใช้งาน เครื่องยนต์ 2500 cc. DIESEL พร้อมทะเบียนมงคล 7474",
          image: "https://cdn.shopify.com/s/files/1/0718/1441/4580/files/rn-image_picker_lib_temp_a28baac3-7e7e-4549-96e4-c86e00dd1f14.jpg?v=1733598390",
          link: "car-detail.html?handle=d-max-hi-lander-2-5-x-series-ddi-i-teq-super-platinum-เกียร์ธรรมดา"
        },
        {
          title: "FORD RANGER 2.2 Cab XLT 6sp 4WD",
          price: "369,000",
          status: "พร้อมส่งมอบ",
          description: "เข้าใหม่กระบะโอเพ่นแคป เกียร์ธรรมดา 4x4 (รถมือแรกเดิมๆ) สภาพดีมากพร้อมใช้งาน FORD RANGER 2.2 เครื่องยนต์ 2.2 DIESEL AIRBAG ABS",
          image: "https://cdn.shopify.com/s/files/1/0718/1441/4580/files/rn-image_picker_lib_temp_ee25ea88-901f-4f0e-8331-10bf37d7ccbd.jpg?v=1734101780",
          link: "car-detail.html?handle=ford-ranger-2-2-cab-xlt-6sp-4wd"
        }
      ];
    }
    // === สร้าง HTML สำหรับรถแต่ละคัน ===
    function createCarCard(car) {
      return `
        <div class="car-card">
          <img src="${car.image}" alt="${car.title}" loading="lazy" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjgwIiBoZWlnaHQ9IjE4MCIgdmlld0JveD0iMCAwIDI4MCAxODAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIyODAiIGhlaWdodD0iMTgwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0xNDAuNSA5MC41TDEyMCAxMTBIMTYxTDE0MC41IDkwLjVaIiBmaWxsPSIjQ0NDQ0NDIi8+CjwvZGc+='">
          <div class="car-info">
            <div class="car-title">${car.title}</div>
            <div class="car-price">฿${car.price}</div>
            <div class="car-status">${car.status}</div>
            <div class="car-desc">${car.description}</div>
            <a href="${car.link}" class="btn-detail" target="_blank" rel="noopener">ดูรายละเอียด</a>
          </div>
        </div>
      `;
    }

    // === โหลดและแสดงรถทั้งหมด ===
    async function loadCars() {
      try {
        const carList = document.getElementById('carList');
        if (!carList) {
          console.error('Car list element not found');
          return;
        }
        
        // แสดง loading state
        carList.innerHTML = `
          <div style="grid-column: 1 / -1; text-align: center; padding: 40px; color: #fa6400;">
            <div style="font-size: 1.2em; margin-bottom: 10px;">🔄 กำลังโหลดรถเข้าใหม่...</div>
            <div style="font-size: 0.9em; color: #888;">กำลังดึงข้อมูลจาก API</div>
          </div>
        `;
        
        // ดึงข้อมูลจาก API
        const cars = await fetchCarsFromAPI();
        
        if (cars && cars.length > 0) {
          console.log('✅ Loading cars...', cars.length, 'cars found');
          const carsHTML = cars.map(car => createCarCard(car)).join('');
          carList.innerHTML = carsHTML;
          console.log('✅ Cars loaded successfully from API');
          
          // อัปเดต JSON-LD Schema ด้วยข้อมูลใหม่
          updateProductSchema(cars);
        } else {
          // แสดงข้อความหากไม่มีข้อมูล
          carList.innerHTML = `
            <div style="grid-column: 1 / -1; text-align: center; padding: 40px; color: #d32f2f;">
              <div style="font-size: 1.2em; margin-bottom: 10px;">❌ ไม่สามารถโหลดข้อมูลรถได้</div>
              <div style="font-size: 0.9em; color: #888;">กรุณารีเฟรชหน้าเว็บใหม่</div>
            </div>
          `;
        }
        
      } catch (error) {
        console.error('Error loading cars:', error);
        
        // แสดงข้อความ error
        const carList = document.getElementById('carList');
        if (carList) {
          carList.innerHTML = `
            <div style="grid-column: 1 / -1; text-align: center; padding: 40px; color: #d32f2f;">
              <div style="font-size: 1.2em; margin-bottom: 10px;">⚠️ เกิดข้อผิดพลาด</div>
              <div style="font-size: 0.9em; color: #888;">ไม่สามารถเชื่อมต่อ API ได้ในขณะนี้</div>
            </div>
          `;
        }
      }
    }

    // === อัปเดต JSON-LD Schema ===
    function updateProductSchema(cars) {
      const productSchema = {
        "@context": "https://schema.org",
        "@graph": cars.map(car => ({
          "@type": "Product",
          "name": car.title,
          "description": car.description,
          "image": car.image,
          "brand": {
            "@type": "Brand",
            "name": "ครูหนึ่งรถสวย"
          },
          "offers": {
            "@type": "Offer",
            "price": car.price.replace(/,/g, ''),
            "priceCurrency": "THB",
            "availability": "https://schema.org/InStock",
            "url": `https://nblues.github.io/recommended-car/${car.link}`
          },
          "aggregateRating": {
            "@type": "AggregateRating",
            "ratingValue": "4.8",
            "reviewCount": "25"
          }
        }))
      };

      // อัปเดต script tag ที่มีอยู่
      const existingScript = document.querySelector('script[type="application/ld+json"]:last-of-type');
      if (existingScript) {
        existingScript.textContent = JSON.stringify(productSchema, null, 2);
      }
    }

    // ========================= ENHANCED ANALYTICS & PERFORMANCE SYSTEM =========================
    
    // Performance Monitoring & Advanced Analytics
    window.carWidgetAnalytics = {
      pageLoadTime: Date.now(),
      apiCallTimes: [],
      errorLog: [],
      userInteractions: [],
      performanceMetrics: {},
      
      logInteraction: function(type, data) {
        this.userInteractions.push({
          type: type,
          data: data,
          timestamp: Date.now()
        });
        
        // Send to Google Analytics 4 if available
        if (typeof gtag !== 'undefined') {
          gtag('event', 'car_widget_interaction', {
            event_category: 'Car Widget',
            event_label: type,
            custom_parameter_1: JSON.stringify(data)
          });
        }
        
        // Track conversion events
        if (type === 'car_detail_click') {
          this.trackConversion('view_car_detail', data);
        }
        
        console.log(`📊 Analytics: ${type}`, data);
      },
      
      trackConversion: function(eventName, carData) {
        if (typeof gtag !== 'undefined') {
          gtag('event', eventName, {
            event_category: 'Conversion',
            event_label: carData.title,
            value: parseFloat(carData.price?.replace(/[^\d.-]/g, '') || 0),
            currency: 'THB',
            item_id: carData.handle,
            item_name: carData.title,
            item_category: 'Used Car',
            content_type: 'product'
          });
        }
      },
      
      measurePerformance: function() {
        if ('performance' in window) {
          try {
            const perfData = performance.getEntriesByType('navigation')[0];
            if (perfData) {
              this.performanceMetrics = {
                loadTime: perfData.loadEventEnd - perfData.loadEventStart,
                domContentLoaded: perfData.domContentLoadedEventEnd - perfData.navigationStart,
                firstPaint: performance.getEntriesByName('first-paint')[0]?.startTime || 0,
                firstContentfulPaint: performance.getEntriesByName('first-contentful-paint')[0]?.startTime || 0
              };
            }
          } catch (e) {
            console.warn('Performance measurement failed:', e);
          }
        }
      },
      
      logError: function(error, context) {
        this.errorLog.push({
          error: error.toString(),
          context: context,
          timestamp: Date.now(),
          userAgent: navigator.userAgent,
          url: window.location.href
        });
        
        // Send error to analytics
        if (typeof gtag !== 'undefined') {
          gtag('event', 'exception', {
            description: error.toString(),
            fatal: false,
            custom_parameter_1: context
          });
        }
        
        console.error(`🚨 Error in ${context}:`, error);
      }
    };

    // ========================= ENHANCED FEATURES =========================

    // Enhanced Service Worker for offline support and caching
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('/sw.js').then(registration => {
        console.log('Service Worker registered:', registration);
        window.carWidgetAnalytics.logInteraction('sw_registered', {});
      }).catch(error => {
        console.log('Service Worker registration failed:', error);
        window.carWidgetAnalytics.logError(error, 'serviceWorker');
      });
    }
    
    // Track page visibility for analytics
    document.addEventListener('visibilitychange', () => {
      if (document.hidden) {
        window.carWidgetAnalytics.logInteraction('page_hidden', {
          timeOnPage: Date.now() - window.carWidgetAnalytics.pageLoadTime
        });
      } else {
        window.carWidgetAnalytics.logInteraction('page_visible', {});
      }
    });
    
    // Track scroll depth for engagement metrics
    let maxScrollPercentage = 0;
    window.addEventListener('scroll', () => {
      const scrollPercentage = Math.round(
        (window.scrollY / (document.documentElement.scrollHeight - window.innerHeight)) * 100
      );
      
      if (scrollPercentage > maxScrollPercentage) {
        maxScrollPercentage = scrollPercentage;
        
        // Track scroll milestones
        if (scrollPercentage % 25 === 0) {
          window.carWidgetAnalytics.logInteraction('scroll_milestone', {
            percentage: scrollPercentage
          });
        }
      }
    });

    // Enhanced fetchFromShopify with performance monitoring
    const originalFetchFromShopify = window.fetchFromShopify;
    if (originalFetchFromShopify) {
      window.fetchFromShopify = async function() {
        const startTime = Date.now();
        window.carWidgetAnalytics.logInteraction('api_call_start', {});
        
        try {
          const result = await originalFetchFromShopify();
          const endTime = Date.now();
          const apiTime = endTime - startTime;
          window.carWidgetAnalytics.apiCallTimes.push(apiTime);
          
          window.carWidgetAnalytics.logInteraction('api_call_success', {
            responseTime: apiTime,
            productsCount: result ? result.length : 0
          });
          
          return result;
        } catch (error) {
          window.carWidgetAnalytics.logError(error, 'fetchFromShopify');
          throw error;
        }
      };
    }

    // Measure initial performance
    window.addEventListener('load', () => {
      setTimeout(() => {
        window.carWidgetAnalytics.measurePerformance();
        window.carWidgetAnalytics.logInteraction('page_loaded', {
          performanceMetrics: window.carWidgetAnalytics.performanceMetrics
        });
      }, 100);
    });

    // Enhanced error handling for the entire widget
    window.addEventListener('error', (event) => {
      window.carWidgetAnalytics.logError(event.error, 'global_error');
    });

    window.addEventListener('unhandledrejection', (event) => {
      window.carWidgetAnalytics.logError(event.reason, 'unhandled_promise_rejection');
    });

    // Performance optimization: Use requestIdleCallback if available
    if ('requestIdleCallback' in window) {
      requestIdleCallback(() => {
        // Initialize analytics after everything else is done
        window.carWidgetAnalytics.logInteraction('widget_ready', {
          totalTime: Date.now() - window.carWidgetAnalytics.pageLoadTime
        });
      });
    }

    // === โหลดข้อมูลอัตโนมัติ ===

    // โหลดรถเมื่อหน้าเว็บโหลดเสร็จ
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', loadCars);
    } else {
      loadCars();
    }

    // รีเฟรชข้อมูลทุก 5 นาที (300,000 มิลลิวินาที)
    setInterval(async () => {
      console.log('🔄 Auto-refresh: กำลังอัปเดตข้อมูลรถ...');
      await loadCars();
    }, 300000);

    // รีเฟรชเมื่อผู้ใช้กลับมาที่หน้าเว็บ
    document.addEventListener('visibilitychange', () => {
      if (!document.hidden) {
        console.log('🔄 Page visible: รีเฟรชข้อมูลรถ...');
        loadCars();
      }
    });

    // Fallback: โหลดรถหลังจาก 2 วินาที หากโหลดไม่สำเร็จ
    setTimeout(() => {
      const carList = document.getElementById('carList');
      if (carList && carList.innerHTML.includes('กำลังโหลด')) {
        console.log('⚠️ Fallback: โหลดข้อมูล fallback...');
        loadCars();
      }
    }, 2000);
  </script>
</body>
</html>
